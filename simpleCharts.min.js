 /*********************************************************************
 * simpleCharts.js                                                     *
 *                                                                    *
 * Version: 1.0                                                       *
 * Date:    18-04-2018                                                *
 * Author:  Dan Machado                                               *
 * Require  raphaeljs v2.2.1                                              *
 **********************************************************************/
function formatNumber(t,i){var e,o,r,h,a,s;for(e=void 0===i?2:i,-1==(o=String(t)).indexOf(".")&&(o+="."),0==(a=(h=(r=(o+="000000").split("."))[0].length)-3*Math.floor(h/3))&&(a=3),s=r[0].substring(0,a);a<h-1;)s+=","+r[0].substring(a,a+3),a+=3;return s+"."+r[1].substring(0,e)}function roundNumber(t,i){var e=2;return"number"==typeof i&&(e=i),Math.round(t*Math.pow(10,e))/Math.pow(10,e)}function CloneObject(t){var i,e;if(t instanceof Object&&!(t instanceof Array)){e={};for(i in t)t.hasOwnProperty(i)&&(t[i]instanceof Object?e[i]=CloneObject(t[i]):e[i]=t[i])}else if(t instanceof Array){e=[];var o,r=t.length;for(o=0;o<r;o++)e[o]=t[o]}return e}function complementObject(t,i){if(!(t instanceof Object)||t instanceof Array)return!(t instanceof Array);for(var e in t)t.hasOwnProperty(e)&&(void 0===i[e]&&(t[e]instanceof Object&&!(t[e]instanceof Array)?i[e]={}:i[e]=null),complementObject(t[e],i[e])&&(i[e]=t[e]))}function overWriteObj(t,i){var e;if(t instanceof Object&&!(t instanceof Array)&&t instanceof Object&&!(t instanceof Array))for(e in t)t.hasOwnProperty(e)&&i.hasOwnProperty(e)&&(t[e]instanceof Object?overWriteObj(t[e],i[e]):i[e]instanceof Object||(t[e]=i[e]))}function changeColor(t,i){var e=Math.abs(i);e<0&&(e+=1);var o,r,h={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},a=[0,1,2,3,4,5,6,7,8,9,"A","B","C","D","E","F"],s="#";(t=(t=String(t)).toUpperCase()).length;for(r=1;r<4;r++)o=16*h[t[2*r-1]]+h[t[2*r]],i<0?o*=e:o=(255-o)*e+o,o=Math.round(o),s+=String(a[Math.floor(o/16)])+String(a[o-16*Math.floor(o/16)]);return s}function Paper(t){this.ID=t;var i=document.getElementById(this.ID);this.paper=Raphael(t,i.clientWidth,i.clientHeight),this.paper.setViewBox(0,0,i.clientWidth,i.clientHeight,!0),this.paper.setSize("100%","100%")}function Core(t){this.id=t,this[t]=null}function Shape(){this.obj=null}function Rect(t,i,e,o,r,h){Shape.call(this),this.obj=t.paper.rect(i,e,o,r,0),void 0!==h&&this.obj.attr(h)}function Line(t,i,e,o,r,h){Shape.call(this),this.obj=t.paper.path("M"+i+","+e+"L"+o+","+r),void 0!==h&&this.obj.attr(h)}function AnimateHBar(t,i,e,o,r,h,a){Shape.call(this),this.obj=t.paper.path("M"+i+","+e+"L"+i+","+e+"L"+i+","+(e+r)+"L"+i+","+(e+r)+"Z"),void 0!==a&&this.obj.attr(a),this.obj.animate({path:"M"+i+","+e+"L"+(i+o)+","+e+"L"+(i+o)+","+(e+r)+"L"+i+","+(e+r)+"Z"},h,"linear")}function AnimateVBar(t,i,e,o,r,h){Shape.call(this),this.obj=t.paper.path("M"+i+","+e+"L"+(i+o)+","+e+"L"+(i+o)+","+e+"L"+i+","+e+"Z"),void 0!==h&&this.obj.attr(h),this.obj.animate({path:"M"+i+","+e+"L"+(i+o)+","+e+"L"+(i+o)+","+(e-r)+"L"+i+","+(e-r)+"Z"},2e3,"linear")}function Circle(t,i,e,o,r){Shape.call(this),this.obj=t.paper.circle(i,e,o),void 0!==r&&this.obj.attr(r)}function AnimateCircle(t,i,e,o,r){Shape.call(this),this.obj=t.paper.circle(i,e,.1),void 0!==r&&this.obj.attr(r),this.obj.animate(Raphael.animation({r:o},2e3))}function Path(t,i,e){Shape.call(this),this.obj=t.paper.path(i),void 0!==e&&this.obj.attr(e)}function AnimateLine(t,i,e,o,r,h,a){Shape.call(this),this.obj=t.paper.path("M"+i+","+e),void 0!==a&&this.obj.attr(a),this.obj.animate({path:"M"+i+","+e+"L"+o+","+r},h,"linear")}function AnimatedArch(t,i,e,o,r,h,a,s,n){Shape.call(this),this.r=5,this.ms=s,this.tt=0,this.time=Date.now()+s,this.perc=e,this.initialAngle=i,this.radious=h,this.width=a,this.cx=o,this.cy=r,this.x0=(this.radious+this.width)*Math.cos(this.initialAngle)+this.cx,this.y0=(this.radious+this.width)*Math.sin(this.initialAngle)+this.cy,this.x1=this.radious*Math.cos(this.initialAngle)+o,this.y1=this.radious*Math.sin(this.initialAngle)+r,this.obj=t.paper.path("M"+this.x0+" "+this.y0+"L"+this.x1+" "+this.y1),void 0!==n&&this.obj.attr(n),this.animateArch()}function Text(t,i,e,o,r,h,a,s){var n;if(Shape.call(this),void 0===s)s=this.defaultStyle;else for(n in this.defaultStyle)this.defaultStyle.hasOwnProperty(n)&&!s.hasOwnProperty(n)&&(s[n]=this.defaultStyle[n]);if(this.Style=s,this.dummySVG.counter++,null===this.dummySVG.data){this.dummySVG.data=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.dummySVG.data.setAttribute("viewBox","0 0 1000 100"),this.dummySVG.data.setAttribute("preserveAspectRatio","xMidYMid meet"),document.body.appendChild(this.dummySVG.data);var c=document.createElementNS("http://www.w3.org/2000/svg","text");c.setAttribute("x",-1e4),c.setAttribute("y",100);var p=document.createElementNS("http://www.w3.org/2000/svg","tspan");p.setAttribute("dy",4),c.appendChild(p),this.dummySVG.data.appendChild(c)}this.strStyle.data!=s["font-size"]+s["font-weight"]+s["font-family"]+s["font-style"]&&(this.strStyle.data=s["font-size"]+s["font-weight"]+s["font-family"]+s["font-style"],this.dummySVG.data.childNodes[0].setAttributeNS(null,"font-size",s["font-size"]+"px"),this.dummySVG.data.childNodes[0].setAttributeNS(null,"font-family",s["font-family"]),this.dummySVG.data.childNodes[0].setAttributeNS(null,"font-style",s["font-style"]),this.dummySVG.data.childNodes[0].setAttributeNS(null,"font-weight",s["font-weight"]),this.dummySVG.data.childNodes[0].setAttributeNS(null,"text-anchor","start"));var l,u,d,b,f,m=String(a).trim();for(m=m.replace("&amp;","&"),f=(a=this.textLines(o,m)).lines.length,b="",l=0;l<f;l++)b+=a.lines[l],l<f-1&&(b+="\n");this.align=h,this.valign=r,s["text-anchor"]="middle",u=i+o/2,"left"==h?(s["text-anchor"]="start",u=i):"right"==h&&(s["text-anchor"]="end",u=i+o),this.obj=t.paper.text(0,e,b),this.obj.attr(s),d=this.obj.getBBox().height,d="before"==r?e-d/2:"after"==r?e+d/2:e,this.obj.attr({x:u,y:d}),this.dummySVG.counter--}Paper.prototype.Clear=function(){this.paper.clear()},Paper.prototype.getById=function(t){return this.paper.getById(t)},Paper.prototype.getDimension=function(t){var i=document.getElementById(this.ID);return"width"==t?i.clientWidth:"height"==t?i.clientHeight:void 0},Paper.prototype.defaults={text:{fill:"#000000","font-family":"inherit","font-size":12,"font-style":"normal","font-weight":"normal"}},Object.freeze(Paper.prototype.defaults),Core.prototype.hide=function(){this[this.id].hide()},Core.prototype.show=function(){this[this.id].show()},Core.prototype.toFront=function(){this[this.id].toFront()},Core.prototype.toShow=function(){this[this.id].toFront(),this[this.id].show()},Core.prototype.getBBox=function(t){return"boolean"==typeof t?this[this.id].getBBox(t):this[this.id].getBBox()},Core.prototype.mouseover=function(t){this[this.id].mouseover(t)},Core.prototype.mouseout=function(t){this[this.id].mouseout(t)},Shape.prototype.attr=function(t){this.obj.attr(t)},Shape.prototype.move=function(t){var i,e,o=this.obj.getBBox();i=t.hasOwnProperty("x")?t.x:o.x,e=t.hasOwnProperty("y")?t.y:o.y;var r,h,a=this.obj.getBBox(!0);this.obj.matrix.a>0?this.obj.matrix.b>0?(r=a.height*this.obj.matrix.b,h=0):(r=0,h=-1*a.width*this.obj.matrix.b):this.obj.matrix.b>0?(r=o.width,h=-1*a.height*this.obj.matrix.a):(r=-1*a.width*this.obj.matrix.a,h=o.height),i+=r,e+=h;var s=this.obj.matrix.invert().x(i,e),n=this.obj.matrix.invert().y(i,e);this.obj.attr({x:s,y:n})},Shape.prototype.show=function(){this.obj.show()},Shape.prototype.hide=function(){this.obj.hide()},Shape.prototype.toFront=function(){this.obj.toFront()},Shape.prototype.toShow=function(){this.obj.show(),this.obj.toFront()},Shape.prototype.toBack=function(){this.obj.toBack()},Shape.prototype.mouseover=function(t){this.obj.mouseover(t)},Shape.prototype.mouseout=function(t){this.obj.mouseout(t)},Shape.prototype.getId=function(){return this.obj.id},Shape.prototype.getBBox=function(t){return"boolean"==typeof t?this.obj.getBBox(t):this.obj.getBBox()},Rect.prototype=Object.create(Shape.prototype,{constructor:{configurable:!0,enumerable:!0,value:Rect,writable:!0}}),Line.prototype=Object.create(Shape.prototype,{constructor:{configurable:!0,enumerable:!0,value:Line,writable:!0}}),AnimateHBar.prototype=Object.create(Shape.prototype,{constructor:{configurable:!0,enumerable:!0,value:AnimateHBar,writable:!0}}),AnimateVBar.prototype=Object.create(Shape.prototype,{constructor:{configurable:!0,enumerable:!0,value:AnimateVBar,writable:!0}}),Circle.prototype=Object.create(Shape.prototype,{constructor:{configurable:!0,enumerable:!0,value:Circle,writable:!0}}),AnimateCircle.prototype=Object.create(Shape.prototype,{constructor:{configurable:!0,enumerable:!0,value:AnimateCircle,writable:!0}}),Path.prototype=Object.create(Shape.prototype,{constructor:{configurable:!0,enumerable:!0,value:Path,writable:!0}}),AnimateLine.prototype=Object.create(Shape.prototype,{constructor:{configurable:!0,enumerable:!0,value:AnimateLine,writable:!0}}),AnimatedArch.prototype=Object.create(Shape.prototype,{constructor:{configurable:!0,enumerable:!0,value:AnimatedArch,writable:!0}}),AnimatedArch.prototype.animateArch=function(){if(Date.now()<this.time?(this.tt=this.ms-(this.time-Date.now()),this.a=0):(this.a+=1,this.tt=this.ms),this.a<3){this.a++;var t=this;this.correction=0,setTimeout(function(){t.animateArch()},this.r),this.correction>1&&(this.correction=0);var i=this.perc*(this.tt/this.ms)*.9999,e=Math.floor(.5+i/100),o=this.initialAngle+2*Math.PI*i/100,r=Math.cos(o),h=Math.sin(o),a="M"+this.x0+","+this.y0+"A"+(this.radious+this.width)+" "+(this.radious+this.width)+" 0 "+e+" 1";a+=" "+((this.radious+this.width)*r+this.cx)+" "+((this.radious+this.width)*h+this.cy),a+="L"+(this.radious*r+this.cx)+","+(this.radious*h+this.cy),a+="A"+this.radious+" "+this.radious+" 0 "+e+" 0 "+this.x1+" "+this.y1,a+="Z",this.obj.node.setAttribute("d",a)}},AnimatedArch.prototype.animateArch2=function(){if(this.tt<this.ms){this.tt+=this.r;var t=this;this.correction+=.4,setTimeout(function(){t.animateArch()},this.r-Math.floor(this.correction)),this.correction>1&&(this.correction=0);var i=this.perc*(this.tt/this.ms)*.9999,e=Math.floor(.5+i/100),o=this.initialAngle+2*Math.PI*i/100,r=Math.cos(o),h=Math.sin(o),a="M"+this.x0+","+this.y0+"A"+(this.radious+this.width)+" "+(this.radious+this.width)+" 0 "+e+" 1";a+=" "+((this.radious+this.width)*r+this.cx)+" "+((this.radious+this.width)*h+this.cy),a+="L"+(this.radious*r+this.cx)+","+(this.radious*h+this.cy),a+="A"+this.radious+" "+this.radious+" 0 "+e+" 0 "+this.x1+" "+this.y1,a+="Z",this.obj.node.setAttribute("d",a)}},Text.prototype=Object.create(Shape.prototype,{constructor:{configurable:!0,enumerable:!0,value:Text,writable:!0}}),Text.prototype.strStyle={data:null},Text.prototype.dummySVG={data:null,counter:0},Text.prototype.textContainer={data:null},Text.prototype.defaultStyle={fill:"#000000","font-family":"Arial, sans-serif","font-size":12,"font-style":"normal","font-weight":"normal"},Text.prototype.textM=function(t){this.dummySVG.data.childNodes[0].childNodes[0].appendChild(document.createTextNode(t));var i=this.dummySVG.data.getBBox();return this.dummySVG.data.childNodes[0].childNodes[0].removeChild(this.dummySVG.data.childNodes[0].childNodes[0].childNodes[0]),i.width},Text.prototype.trimText=function(t,i,e){var o,r,h="";r=(t=String(t).trim()).length,this.textM("...");var a,s="";if(t=t.replace("\n"," "),i>=this.textM(t))return t;for(o=0;o<r;o++){if(s=h,h+=t[o],i==(a=this.textM(h+"..."))){h="...";break}if(i<a){h=s+"...";break}}return h},Text.prototype.breakingText=function(t){var i={words:[],lengths:[],sp:0};i.sp=this.textM("a a")-2*this.textM("a"),this.spaceWidth=i.sp;var e,o,r,h=String(t).split(" ");for(0,o=h.length,e=0;e<o;e++)h[e]=h[e].trim(),0!=(r=this.textM(h[e]))&&(i.words.push(h[e]),i.lengths.push(r));return i},Text.prototype.textLines=function(t,i){var e,o,r,h,a,s,n=t,c=[],p=[],l=String(i).split("\n");for(r=0,s=l.length,a=0;a<s;a++){for(c[r]="",p[r]=0,n=t,h=(e=this.breakingText(l[a])).words.length,o=0;o<h;o++)n-e.lengths[o]<0&&n!=t&&(c[++r]="",p[r]=0,n=t),c[r].length>0&&(c[r]+=" ",p[r]+=e.sp,n-=e.sp),c[r]+=e.words[o],p[r]+=e.lengths[o],n-=e.lengths[o];r++}return{lines:c,lg:p}},Text.prototype.move=function(t){var i,e,o=this.obj.getBBox();i=t.hasOwnProperty("x")?t.x:o.x,e=t.hasOwnProperty("y")?t.y:o.y;var r,h,a=this.obj.getBBox(!0);this.obj.matrix.a>0?this.obj.matrix.b>0?(r=a.height*this.obj.matrix.b,h=0):(r=0,h=-1*a.width*this.obj.matrix.b):this.obj.matrix.b>0?(r=o.width,h=-1*a.height*this.obj.matrix.a):(r=-1*a.width*this.obj.matrix.a,h=o.height),i+=r,e+=h;var s=this.obj.matrix.invert().x(i,e),n=this.obj.matrix.invert().y(i,e);"right"==this.align?s+=a.width:"center"==this.align&&(s+=a.width/2),n+=a.height/2,this.obj.attr({x:s,y:n})},Text.prototype.attr=function(t){delete t.x,delete t.y,this.obj.attr(t)};
function Set(){this.x=0,this.y=0,this.width=0,this.height=0,this.set=[]}function Wrapper(t,i){Shape.call(this),this.x=0,this.y=0,this.width=0,this.height=0,this.obj=t;var h=this.obj.getBBox();this.x=h.x,this.y=h.y;var e=0;i.hasOwnProperty("h")?i.h>h.height&&(this.height=i.h,e=i.h-h.height,i.hasOwnProperty("valign")?e*=i.valign/100:e*=.5):i.hasOwnProperty("vPadding")?(this.height=h.height+2*i.vPadding,e=i.vPadding):this.height=h.height,e>0&&(this.y-=e),e=0,i.hasOwnProperty("w")?i.w>h.width&&(this.width=i.w,e=i.w-h.width,i.hasOwnProperty("align")?e*=i.align/100:e*=.5):i.hasOwnProperty("hPadding")?(this.width=h.width+2*i.hPadding,e=i.hPadding):this.width=h.width,e>0&&(this.x-=e)}function Row(t,i,h,e){Set.call(this),this.coordinates=[],this.sp=[],this.valignment=[],this.justifyContent="left",this.valign=0,this.w=0,this.xd=1,"number"==typeof t&&(this.width=t,this.xd=0),"number"==typeof i&&(this.height=i),"string"==typeof e&&("middle"!=e&&"bottom"!=e||("middle"==e?this.valign=1:"bottom"==e&&(this.valign=2))),0==this.xd&&"string"==typeof h&&("center"!=h&&"right"!=h&&"space-between"!=h&&"space-around"!=h||(this.justifyContent=h))}function Group(t,i,h){Set.call(this),this.currentRow=0,this.h=0,this.sil=!1,"number"==typeof i&&"inline"==t&&i>0&&(this.width=i,this.sil=!0),this.geometry="default","inline"!=t&&"stocked"!=t||(this.geometry=t),this.justifyContent="left",void 0===h&&"string"==typeof i&&(h=i),"inline"!=t||"space-between"!=h&&"space-around"!=h?"left"!=h&&"right"!=h&&"center"!=h||(this.justifyContent=h):this.justifyContent=h}function MiniPage(t,i,h,e,s,o){if(void 0===o)o={};this.setDefaults(o),this.paddingX=o.paddingX,this.paddingY=o.paddingY,Group.call(this,o.geometry,e-2*this.paddingX,o.justifyContent),Group.prototype.move.call(this,{x:i+this.paddingX,y:h+this.paddingY}),this.miniPage=null,o.miniPage&&(this.miniPage=new Rect(t,i,h,e,s,o))}function Group2(t,i,h){Set.call(this),this.set[0]=new Row(i,0,h),"number"==typeof i&&"inline"==t&&i>0&&(this.width=i),this.geometry="default","inline"!=t&&"stocked"!=t||(this.geometry=t),this.justifyContent="left",void 0===h&&"string"==typeof i&&(h=i),"inline"!=t||"space-between"!=h&&"space-around"!=h?"left"!=h&&"right"!=h&&"center"!=h||(this.justifyContent=h):this.justifyContent=h}Set.prototype.getBBox=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},Set.prototype.move=function(t){var i,h,e,s=this.x,o=this.y;for(t.hasOwnProperty("x")&&(s=t.x),t.hasOwnProperty("y")&&(o=t.y),h=this.set.length,i=0;i<h;i++)e=this.set[i].getBBox(),this.set[i].move({x:s+e.x-this.x,y:o+e.y-this.y});this.x=s,this.y=o},Set.prototype.toShow=function(){this.looping(function(t){t.toFront(),t.show()})},Set.prototype.show=function(){this.looping(function(t){t.show()})},Set.prototype.toFront=function(){this.looping(function(t){t.toFront()})},Set.prototype.hide=function(){this.looping(function(t){t.hide()})},Set.prototype.Scale=function(t){this.looping(function(i){i.attr({transform:t})})},Set.prototype.looping=function(t){var i,h=this.set.length;for(i=0;i<h;i++)t(this.set[i])},Wrapper.prototype=Object.create(Shape.prototype,{constructor:{configurable:!0,enumerable:!0,value:Wrapper,writable:!0}}),Wrapper.prototype.getBBox=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},Wrapper.prototype.move=function(t){var i,h,e,s,o;i=this.x,h=this.y,t.hasOwnProperty("x")&&(i=t.x),t.hasOwnProperty("y")&&(h=t.y),e=(o=this.obj.getBBox()).x-this.x+i,s=o.y-this.y+h,this.obj.move({x:e,y:s}),this.x=i,this.y=h},Row.prototype=Object.create(Set.prototype,{constructor:{configurable:!0,enumerable:!0,value:Row,writable:!0}}),Row.prototype.insert=function(t,i){var h=0,e=this.set.length;this.set[e]=t,void 0===this.sp[e]&&(this.sp[e]=0);var s=this.set[e].getBBox();this.valignment[e]=this.valign,"string"==typeof i&&("top"==i?this.valignment[e]=0:"middle"==i?this.valignment[e]=1:"bottom"==i&&(this.valignment[e]=2));var o,n=this.x;if(this.w+=s.width,(this.xd||this.w>this.width)&&(this.width=this.w),0==this.xd&&"left"!=this.justifyContent)for(o=Math.max(0,this.width-this.w),"right"==this.justifyContent||"center"==this.justifyContent?("center"==this.justifyContent&&(o/=2),n+=o,o=0):"space-between"==this.justifyContent&&e>0?0==e?n+=o/2:o/=e:"space-around"==this.justifyContent&&(n+=(o/=e+1)/2),h=0;h<e+1;h++)n+=this.sp[h],this.set[h].move({x:n}),this.coordinates[h]=n,n+=(s=this.set[h].getBBox()).width+o;else n+=this.w-s.width,this.set[e].move({x:n}),this.coordinates[e]=n;var r=0;for(h=0;h<e+1;h++)r+=this.valignment[h];if(r>0){if(s=this.set[e].getBBox(),this.height>s.height){r=this.valignment[e]*(this.height-s.height)/2;this.set[e].move({x:this.coordinates[e],y:this.y+r})}else if(this.height<s.height){var a;for(this.height=s.height,h=0;h<e+1;h++)s=this.set[h].getBBox(),a=this.y+this.valignment[h]*(this.height-s.height)/2,this.set[h].move({y:a})}}else this.set[e].move({y:this.y});this.height<s.height&&(this.height=s.height)},Row.prototype.insertSpace=function(t){this.sp[this.set.length]=t,this.w+=t,(this.xd||this.w>this.width)&&(this.width+=t)},Row.prototype.move=function(t){var i,h,e,s;for(t.hasOwnProperty("x")&&(this.x=t.x),t.hasOwnProperty("y")&&(this.y=t.y),h=this.set.length,i=0;i<h;i++)e=this.set[i].getBBox(),s=this.y+this.valignment[i]*(this.height-e.height)/2,this.set[i].move({x:this.coordinates[i]+this.x,y:s})},Group.prototype=Object.create(Set.prototype,{constructor:{configurable:!0,enumerable:!0,value:Group,writable:!0}}),Group.prototype.insert=function(t){var i=this.set.length;this.set[i]=t;var h=this.set[i].getBBox();if("default"==this.geometry)h.x<this.x&&(this.x=h.x),h.y<this.y&&(this.y=h.y),h.y+h.height>this.y+this.height&&(this.height=h.y+h.height-this.y),h.x+h.width>this.x+this.width&&(this.width=h.x+h.width-this.x);else if("stocked"==this.geometry){var e=this.x,s=this.y,o=0;"center"==this.justifyContent?o=1:"right"==this.justifyContent&&(o=2),e=this.x+o*(this.width-h.width)/2,this.set[i].move({x:e,y:s+this.height}),this.height+=h.height,o&&this.x>e&&(this.x=e),h.width>this.width&&(this.width=h.width)}else if("inline"==this.geometry){var n,r,a=0;if(e=this.x,0==this.sil)this.set[i].move({x:e+this.width,y:this.y}),this.width+=h.width,this.height<h.height&&(this.height=h.height);else{for(n=this.currentRow;n<i;n++)a+=this.set[n].getBBox().width;for(a+h.width>this.width?(this.currentRow=i,a=h.width,this.h=0):a+=h.width,this.h<h.height&&(this.height+=h.height-this.h,this.h=h.height),s=this.y+this.height-this.h,r=this.width-a,"left"==this.justifyContent?r=0:"right"==this.justifyContent||"center"==this.justifyContent?("center"==this.justifyContent&&(r/=2),e+=r,r=0):"space-between"==this.justifyContent&&i>0?i-this.currentRow==0?e+=r/2:r/=i-this.currentRow:"space-around"==this.justifyContent&&(e+=(r/=i+1-this.currentRow)/2),n=this.currentRow;n<i+1;n++)this.set[n].move({x:e,y:s}),e+=(h=this.set[n].getBBox()).width+r}}},Group.prototype.insertSpace=function(t){t>0&&(0==this.w&&"inline"==this.geometry?this.width+=t:this.height+=t)},MiniPage.prototype=Object.create(Group.prototype,{constructor:{configurable:!0,enumerable:!0,value:MiniPage,writable:!0}}),MiniPage.prototype.defaults={geometry:"stocked",paddingX:5,paddingY:5,miniPage:!1,justifyContent:"left"},Object.freeze(MiniPage.prototype.defaults),MiniPage.prototype.setDefaults=function(t){var i;for(i in this.defaults)this.defaults.hasOwnProperty(i)&&void 0===t[i]&&(t[i]=this.defaults[i])},MiniPage.prototype.getBBox=function(t){return null!==this.miniPage?this.miniPage.getBBox(t):{x:this.x-this.paddingX,y:this.y-this.paddingY,height:this.height+2*this.paddingY,width:this.width+2*this.paddingX}},MiniPage.prototype.insertSpace=function(t){if(Group.prototype.insertSpace.call(this,t),null!==this.miniPage){var i=this.getBBox();this.height+2*this.paddingY!=i.height&&this.reSize(this.width+2*this.paddingX,this.height+2*this.paddingY)}},MiniPage.prototype.insert=function(t){if(Group.prototype.insert.call(this,t),null!==this.miniPage){var i=this.getBBox();this.height+2*this.paddingY!=i.height&&this.reSize(this.width+2*this.paddingX,this.height+2*this.paddingY)}},MiniPage.prototype.bound=function(t,i,h,e){var s=this.getBBox(),o=s.x+i,n=s.y+h;t.move({x:o,y:n}),"boolean"==typeof e&&!0===e&&(s=t.getBBox(),this.reSize(s.width+2*this.paddingX,s.height+2*this.paddingY))},MiniPage.prototype.reSize=function(t,i){null!==this.miniPage&&this.miniPage.attr({width:t,height:i})},MiniPage.prototype.toFront=function(){null!==this.miniPage&&this.miniPage.toFront(),Group.prototype.toFront.call(this)},MiniPage.prototype.hide=function(){null!==this.miniPage&&this.miniPage.hide(),Group.prototype.hide.call(this)},MiniPage.prototype.toShow=function(){null!==this.miniPage&&this.miniPage.toShow(),Group.prototype.toShow.call(this)},MiniPage.prototype.setStyle=function(t,i){"body"==t?this.miniPage.attr(i):this.set[t].attr(i)},MiniPage.prototype.move=function(t){var i=this.getBBox(),h=i.x,e=i.y;t.hasOwnProperty("x")&&(h=t.x),t.hasOwnProperty("y")&&(e=t.y),null!==this.miniPage&&this.miniPage.move({x:h,y:e}),Group.prototype.move.call(this,{x:h+this.paddingX,y:e+this.paddingY})},Group2.prototype=Object.create(Set.prototype,{constructor:{configurable:!0,enumerable:!0,value:Group2,writable:!0}}),Group2.prototype.insert=function(t,i){var h=t.getBBox(),e=this.set.length;0==e||this.set[e-1].getBBox().width+h.width>this.width?(this.set[e]=new Row,this.set[e].move({x:this.x,y:this.y+this.height})):e--;var s="top";void 0!==i&&(s=i),this.set[e].insert(t,s),this.height+=this.set[e].getBBox().height},Group2.prototype.insertSpace=function(t){t>0&&(0==this.w&&"inline"==this.geometry?this.width+=t:this.height+=t)};
function Grid(t){this.objData=t,this.containerID=t.canvasID,this.canvas=document.getElementById(t.canvasID),this.containerWidth=this.canvas.clientWidth,this.containerHeight=this.canvas.clientHeight,this.paddingX=10,this.paddingy=5}Grid.prototype.reSizePaper=function(t,i){this.paper.paper.setSize(t,i)},Grid.prototype.defaultSettings={gridSettings:{bgColor:"#ffffff",categoryBoxWidth:160,categoryFontSize:12,scaleColor:"#0000ff",labelColor:"#666666",scaleFontSize:12,scaleArea:45,"font-family":"Arial, sans-serif",popUpA:{maxWidth:200,paddingX:5,paddingY:5,justifyContent:"left",fill:"#ffffff",stroke:"#a1a1a1","stroke-width":.5,font:{fill:"#ff88ee","font-size":14,"font-style":"normal","font-weight":"normal","font-family":""}},popUpB:{maxWidth:300,paddingX:5,paddingY:5,justifyContent:"left",fill:"#000000",stroke:"#a1a1a1","stroke-width":0,font:{fill:"#ffffff","font-size":12,"font-style":"normal","font-weight":"normal","font-family":""}}},title:{fill:"#000000","font-size":22,"font-style":"normal","font-weight":"bold"},subTitle:{fill:"#000000","font-size":16,"font-style":"normal","font-weight":"normal"},axisTitles:{fill:"#a18899","font-size":16,"font-style":"normal","font-weight":"normal"},keys:{fill:"#000000","font-size":14,"font-style":"normal","font-weight":"normal"},additionalInfo:{fill:"#000000","font-size":12,"font-style":"normal","font-weight":"normal"}},Object.freeze(Grid.prototype.defaultSettings),Grid.prototype.setDefaults=function(){var t=CloneObject(this.defaultSettings.gridSettings);complementObject(this.settings,t),this.objData.hasOwnProperty("gridSettings")&&overWriteObj(t,this.objData.gridSettings);var i,e=["title","subTitle","axisTitles","keys","additionalInfo"],s=e.length;for(i=0;i<s;i++)t[e[i]]={},complementObject(this.defaultSettings[e[i]],t[e[i]]),t[e[i]]["font-family"]=t["font-family"],this.objData.hasOwnProperty(e[i])&&this.objData[e[i]].hasOwnProperty("font")&&overWriteObj(t[e[i]],this.objData[e[i]].font);""==t.popUpA.font["font-family"]&&(t.popUpA.font["font-family"]=t["font-family"]),""==t.popUpB.font["font-family"]&&(t.popUpB.font["font-family"]=t["font-family"]),this.settings=null,this.settings=t,this.settings.paddingA=20,this.settings.paddingB=10,this.settings.paddingC=5,this.settings.popUpA.miniPage=!0,this.settings.popUpB.miniPage=!0},Grid.prototype.setPaper=function(){this.paper=new Paper(this.containerID),this.topPanel=new MiniPage(this.paper,0,0,this.containerWidth,0,{paddingX:this.paddingX,paddingY:this.paddingY}),this.bottomPanel=new MiniPage(this.paper,0,0,this.containerWidth,0,{paddingX:this.paddingX,paddingY:this.paddingY}),this.popUp=new MiniPage(this.paper,0,0,100,100,this.settings.popUpA),this.popUp.hide(),this.canvas.style.backgroundColor=this.settings.bgColor},Grid.prototype.setKeys=function(){var t,i,e;if(objData.hasOwnProperty("keys"))if("top"==this.objData.keys.position||"bottom"==this.objData.keys.position?("center"==this.objData.keys.align&&(this.objData.keys.align="space-around"),this.keyBlock=new Group("inline",this.containerWidth-2*this.paddingX,this.objData.keys.align)):this.keyBlock=new Group("stocked","left"),"columns"==this.objData.chartType||"bars"==this.objData.chartType||"donut"==this.objData.chartType||"sunburst"==this.objData.chartType||"lines"==this.objData.chartType)for(i=this.objData.dataSet.length,t=0;t<i;t++){var s=new Row(0,0,"left");s.insert(new Rect(this.paper,10,10,10,10,{fill:this.objData.dataSet[t].color,"stroke-width":"0px"})),s.insertSpace(5),e="sunburst"==this.objData.chartType?this.objData.dataSet[t].name[0]:this.objData.dataSet[t].name,"donut"!=this.objData.chartType&&"sunburst"!=this.objData.chartType||(e+=" "+this.objData.dataSet[t].data[0]+"%"),s.insert(new Text(this.paper,25,5,160,"after","left",e,this.settings.keys)),"top"!=objData.keys.position&&"bottom"!=objData.keys.position||s.insertSpace(10),this.keyBlock.insert(s)}else this.objData.chartType},Grid.prototype.setTitle=function(){if(this.objData.hasOwnProperty("title")){var t=new Text(this.paper,0,0,this.containerWidth,"after","left",this.objData.title.text,this.settings.title);this.topPanel.insert(new Wrapper(t,{w:this.containerWidth,align:.005,vPadding:2}))}if(this.objData.hasOwnProperty("subTitle")){var i=new Text(this.paper,0,0,this.containerWidth,"after","left",this.objData.subTitle.text,this.settings.subTitle);this.topPanel.insert(new Wrapper(i,{w:this.containerWidth,align:.005,vPadding:1}))}},Grid.prototype.setPanelsTB=function(){var t,i;if(this.objData.hasOwnProperty("axisTitles")&&void 0!==this.objData.axisTitles.xTitle&&(this.xTitle=new Wrapper(new Text(this.paper,0,0,this.containerWidth,"after","left",this.objData.axisTitles.xTitle,this.settings.axisTitles),{w:this.containerWidth,align:55,vPadding:5}),this.bottomPanel.insert(this.xTitle)),this.objData.hasOwnProperty("keys")&&("top"==this.objData.keys.position?this.topPanel.insert(this.keyBlock):"bottom"==this.objData.keys.position&&this.bottomPanel.insert(this.keyBlock)),this.objData.hasOwnProperty("additionalInfo"))for(i=this.objData.additionalInfo.length,t=0;t<i;t++)"top"==this.objData.additionalInfo[t].position?this.topPanel.insert(new Wrapper(new Text(this.paper,0,0,this.containerWidth,"after","left",this.objData.additionalInfo[t].content,this.settings.additionalInfo),{w:this.containerWidth,align:50,vPadding:5})):this.bottomPanel.insert(new Wrapper(new Text(this.paper,0,0,this.containerWidth,"after","left",this.objData.additionalInfo[t].content,this.settings.additionalInfo),{w:this.containerWidth,align:.5,vPadding:5}));this.topPanel.insertSpace(10),this.bottomPanel.insertSpace(5),this.topPanel.move({x:0,y:0})},Grid.prototype.presetPanelsLRWH=function(){var t,i=0,e=0,s=0,n=0;return this.objData.hasOwnProperty("keys")&&("left"==this.objData.keys.position?(i=(t=this.keyBlock.getBBox()).width,e=t.height):"right"==this.objData.keys.position&&(s=(t=this.keyBlock.getBBox()).width,n=t.height)),this.objData.hasOwnProperty("axisTitles")&&void 0!==this.objData.axisTitles.yTitle&&(this.yTitle=new Text(this.paper,0,0,this.containerWidth,"after","left",this.objData.axisTitles.yTitle,this.settings.axisTitles),this.yTitle.attr({transform:"r-90,10,10"}),i+=(t=this.yTitle.getBBox()).width+this.paddingX,e=Math.max(e,t.height)),{lw:i,lh:e,rw:s,rh:n}},Grid.prototype.setPanelsLR=function(){var t=this.containerHeight-(this.bottomPanel.height+this.topPanel.height);if(this.leftPanel=new Row(0,t),this.leftPanel.insertSpace(this.paddingX),this.rightPanel=new Row(0,t),this.rightPanel.insertSpace(this.paddingX),this.objData.hasOwnProperty("keys")){var i="top";this.objData.keys.hasOwnProperty("align")&&(i=this.objData.keys.align),"left"==this.objData.keys.position?(this.leftPanel.insert(this.keyBlock,i),this.leftPanel.insertSpace(this.paddingX)):"right"==this.objData.keys.position&&(this.rightPanel.insert(this.keyBlock,i),this.rightPanel.insertSpace(this.paddingX))}this.objData.hasOwnProperty("axisTitles")&&void 0!==this.objData.axisTitles.yTitle&&(this.leftPanel.insert(this.yTitle,"middle"),this.leftPanel.insertSpace(this.paddingX)),this.leftPanel.move({y:this.topPanel.height}),this.rightPanel.move({x:this.containerWidth-this.rightPanel.getBBox().width,y:this.topPanel.height})},Grid.prototype.mkVScale=function(t){for(var i=0,e=t-this.settings.scaleArea-this.settings.paddingB;i<this.yAxisLength;)new Line(this.paper,t,this.y0-i,t+this.xAxisLength,this.y0-i,{stroke:this.settings.scaleColor}),i>0&&new Text(this.paper,e,this.y0-i,this.settings.scaleArea,"middle","right",this.getScaleValues(this.vInvTransform(i)),{fill:this.settings.labelColor,"font-size":this.settings.scaleFontSize,"font-family":this.settings["font-family"]}),i+=this.vScale.intervalLength;i=this.yAxisLength,new Text(this.paper,e,this.y0-i,this.settings.scaleArea,"middle","right",this.getScaleValues(this.vInvTransform(i)),{fill:this.settings.labelColor,"font-size":this.settings.scaleFontSize,"font-family":this.settings["font-family"]}),new Line(this.paper,t,this.y0-i,t+this.xAxisLength,this.y0-i,{stroke:this.settings.scaleColor})},Grid.prototype.mkHScale=function(t){for(var i,e,s,n=0;n<this.xAxisLength;)new Line(this.paper,this.x0+n,t-this.yAxisLength,this.x0+n,t,{stroke:this.settings.scaleColor}),n>0&&(s=(e=(i=new Text(this.paper,this.x0+n,t+this.settings.paddingC,this.settings.scaleArea,"after","left",this.getScaleValues(this.hInvTransform(n)),{fill:this.settings.labelColor,"font-size":this.settings.scaleFontSize,"font-family":this.settings["font-family"]})).getBBox()).x-e.width/2,i.move({x:s})),n+=this.hScale.intervalLength;n=this.xAxisLength,s=(e=(i=new Text(this.paper,this.x0+n,t+this.settings.paddingC,this.settings.scaleArea,"after","left",this.getScaleValues(this.hInvTransform(n)),{fill:this.settings.labelColor,"font-size":this.settings.scaleFontSize,"font-family":this.settings["font-family"]})).getBBox()).x-e.width/2,i.move({x:s}),new Line(this.paper,this.x0+n,t-this.yAxisLength,this.x0+n,t,{stroke:this.settings.scaleColor})},Grid.prototype.scaleValues={0:0,1e-6:"1/1M",1e-5:"1/100k",1e-4:"1/10k",.001:"1/1k",.01:.01,.1:.1,1:1,10:10,100:100,1000:"1k",10000:"10k",100000:"100k",1000000:"1M",10000000:"10M"},Object.freeze(Grid.prototype.scaleValues),Grid.prototype.getScaleValues=function(t){return this.scaleValues.hasOwnProperty(t)?this.scaleValues[t]:t},Grid.prototype.transForm=function(t){return t>0?this.isLogarithmic?this.factor*(Math.log10(t)-this.minEx+1):this.factor*t:0},Grid.prototype.invTransForm=function(t,i){var e=roundNumber(t/this.factor,i);return this.isLogarithmic?Math.pow(10,this.minEx-1+e):e},Grid.prototype.setScale=function(t,i){i(this,t),this.max<this.min&&(this.max=this.min);if(10>this.min*this.axisLength/this.max){this.isLogarithmic=!0;var e=Math.ceil(Math.log10(this.max));this.minEx=Math.ceil(Math.log10(this.min)),e==this.minEx&&this.minEx--,this.numIntervals=e-this.minEx+1,this.intervalLength=this.axisLength/this.numIntervals,this.factor=this.axisLength/(e-this.minEx+1)}else{this.factor=this.axisLength/this.max;var s,n,a=this.intervalLength/this.factor,o=Math.pow(10,Math.ceil(Math.log10(a))),h=[10,5,4,2,1];for(s=0;s<h.length;s++)if(a<o/h[s]){n=o/h[s];break}this.intervalLength=n*this.factor}},Grid.prototype.printcategory=function(t,i,e,s,n,a,o,h){var r=new Text(this.paper,-1500,0,this.settings.popUpB.maxWidth,"after","left",t,this.settings.popUpB.font),l=r.trimText(t,s,{"font-size":this.settings.categoryFontSize,"font-family":this.settings["font-family"]}),p=new Text(this.paper,i,e,s,n,a,l,{fill:this.settings.labelColor,"font-size":this.settings.categoryFontSize,"font-family":this.settings["font-family"]});if(l!=t){var f=this.settings.popUpB,g=r.getBBox(),d=g.width+2*f.paddingX,c=g.height+2*f.paddingY;g=null,p.mouseover(function(t){null==g&&(i=3+t.clientX-document.getElementById(h).getBoundingClientRect().left,e=3+t.clientY-document.getElementById(h).getBoundingClientRect().top,g=1,i+d>document.getElementById(h).getBoundingClientRect().right&&(i-=d),o.setStyle("body",f),o.reSize(d,c),o.move({x:i,y:e}),o.toShow(),o.bound(r,f.paddingX,f.paddingY),r.toShow())}),p.mouseout(function(){r.hide(),o.hide(),g=null})}},Grid.prototype.moveLabel=function(t,i,e,s,n){var a=document.getElementById(this.containerID).getBoundingClientRect(),o=15+t.clientX;o+i>a.right&&(o-=i),o-=a.left;var h=5+t.clientY;h+e>a.bottom&&(h-=e),h-=a.top,this.popUp.setStyle("body",this.settings.popUpA),this.popUp.reSize(i,e),this.popUp.move({x:o,y:h}),this.popUp.toShow(),this.popUp.bound(s,this.settings.popUpA.paddingX,this.settings.popUpA.paddingY),s.toShow()},Grid.prototype.Reload=function(){this.paper.Clear()};
function Bars(t){Grid.call(this,t),this.settings={rowHeight:30,barThickness:14,speed:500},this.setDefaults(),this.settings.rowHeight=Math.max(this.settings.rowHeight,this.settings.barThickness),this.containerHeight=this.containerWidth/1.618,this.canvas.style.height=this.containerHeight+"px",this.setPaper(),this.setTitle(),this.setKeys(),this.setPanelsTB();var i=this.bottomPanel.getBBox(),s=this.topPanel.getBBox(),e=this.presetPanelsLRWH();this.x0=e.lw+this.settings.paddingC+this.settings.paddingB+this.settings.categoryBoxWidth,this.yAxisLength=this.settings.rowHeight*this.objData.labels.length,this.y0=this.settings.paddingC+s.height,this.containerHeight=this.yAxisLength+this.settings.paddingC,this.containerHeight+=s.height+i.height+this.settings.paddingA,this.canvas.style.height=this.containerHeight+"px",this.paper.paper.setViewBox(0,0,this.containerWidth,this.containerHeight);var a=this.containerHeight-i.height;this.bottomPanel.move({y:a}),this.setPanelsLR();var h,n,o=this.rightPanel.getBBox();for(this.xAxisLength=this.containerWidth-this.x0-this.settings.paddingC-o.width-this.settings.scaleArea/2,n=this.objData.dataSet.length,this.kyc=[],h=0;h<n;h++)this.kyc[h]=new Rect(this.paper,-1e3,-300,10,10,{fill:"#ffffff","stroke-width":"0px"}),this.kyc[h].hide();var r=this.objData.dataSet.length;for(this.dataOrder=[],h=0;h<r;h++)this.dataOrder[this.objData.dataSet[h].name]=h,this.kyc[h].attr({fill:this.objData.dataSet[h].color});this.hScale={min:1e6,max:this.objData.dataSet[0].data[0],minEx:null,numIntervals:null,isLogarithmic:!1,axisLength:this.xAxisLength,minVisualValue:10,intervalLength:80,factor:1},this.setScale.call(this.hScale,this.objData.dataSet,function(t,i){var s,e,a,h,n;for(a=i.length,h=i[0].data.length,e=0;e<h;e++)for(n=0,s=0;s<a;s++)i[s].data[e]>0&&(t.min>i[s].data[e]&&(t.min=i[s].data[e]),n+=i[s].data[e]),t.max<n&&(t.max=n)}),this.hTransform=this.transForm.bind(this.hScale),this.hInvTransform=this.invTransForm.bind(this.hScale),this.mkHScale(this.y0+this.yAxisLength),this.printData()}Bars.prototype=Object.create(Grid.prototype,{constructor:{configurable:!0,enumerable:!0,value:Bars,writable:!0}}),Bars.prototype.printData=function(){var t,i,s,e=this.objData.labels.length,a=this.objData.dataSet.length;s=this.y0;var h={},n={},o=[];for(t=0;t<e;t++){new Line(this.paper,this.x0-10,s,this.x0,s,{stroke:this.settings.scaleColor}),this.printcategory(this.objData.labels[t],this.x0-this.settings.categoryBoxWidth-this.settings.paddingC,s+this.settings.rowHeight/2,this.settings.categoryBoxWidth,"middle","left",this.popUp,this.containerID);var r=[],g=[];for(i=0;i<a;i++)g[i]=this.objData.dataSet[i].color,r[i]=this.objData.dataSet[i].name;for(i=0;i<a;i++)h[this.objData.dataSet[i].name]=this.objData.dataSet[i].data[t],n[this.objData.dataSet[i].color]=this.objData.dataSet[i].data[t],o[i]=this.objData.dataSet[i].data[t];r.sort(function(t,i){return h[t]-h[i]}),g.sort(function(t,i){return n[t]-n[i]}),o.sort(function(t,i){return t-i});var l=[];for(i=0;i<a;i++)l[this.dataOrder[r[i]]]=i;this.stockedLogData(this.settings.rowHeight/2+s-this.settings.barThickness/2,o,g,r,this.objData.labels[t],l),s+=this.settings.rowHeight,h=null,h={}}new Line(this.paper,this.x0-10,s,this.x0,s,{stroke:this.settings.scaleColor})},Bars.prototype.stockedBars=function(t,i,s,e,a,h){if(a<s.length){var n=i+s[a],o=Math.round(1e3*(this.hTransform(n)-this.hTransform(i))/this.settings.speed);new AnimateHBar(this.paper,this.x0+this.hTransform(i),t,this.hTransform(n)-this.hTransform(i),this.settings.barThickness,o,{fill:e[a],"stroke-width":"0px"}),this.paper.getById(h).toFront(),a++;var r=this;setTimeout(function(){r.stockedBars(t,n,s,e,a,h)},o)}},Bars.prototype.stockedLogData=function(t,i,s,e,a,h){var n=this;t=t,i=CloneObject(i),s=CloneObject(s),e=CloneObject(e),a=a,h=CloneObject(h);setTimeout(function(){var o,r;r=i.length;var g,l=0;for(o=0;o<r;o++)l+=i[o];g=n.hTransform(l);var p=new Rect(n.paper,n.x0,t,g,n.settings.barThickness,{fill:"#ffffff","fill-opacity":0,"stroke-opacity":0});n.stockedBars(t,0,i,s,0,p.getId());var d=new Group("stocked",n.settings.popUpA.justifyContent);for(d.insert(new Text(n.paper,0,0,n.settings.popUpA.maxWidth,"after","left",a,{fill:n.settings.popUpA.font.fill,"font-size":n.settings.popUpA.font["font-size"],"font-weight":"500","font-family":n.settings.popUpA.font["font-family"]})),d.insertSpace(5),o=0;o<r;o++){var c=new Row;c.insert(n.kyc[o],"middle"),c.insertSpace(5),c.insert(new Text(n.paper,0,0,n.settings.popUpA.maxWidth,"after","left",e[h[o]]+" "+formatNumber(i[h[o]],4),n.settings.popUpA.font)),d.insert(c)}d.hide();var f=d.getBBox(),m=f.width+2*n.settings.popUpA.paddingX,b=f.height+2*n.settings.popUpA.paddingY,u=n.popUp;f=null,p.mouseover(function(t){null==f&&(f=1,n.moveLabel(t,m,b,d,function(t,i){}))}),p.mouseout(function(){d.hide(),u.hide(),f=null})},10*Math.round(100*Math.random()))};
function Columns(t){Grid.call(this,t),this.containerHeight=this.containerWidth/1.618,this.canvas.style.height=this.containerHeight+"px",this.settings={maxColumnWidth:60,columnPadding:15,groupColumnPadding:50},this.setDefaults(),this.setPaper(),this.paper.paper.setViewBox(0,0,this.containerWidth,this.containerHeight),this.setTitle(),this.setKeys(),this.setPanelsTB(),this.presetPanelsLRWH(),this.setPanelsLR();var i=this.bottomPanel.getBBox(),s=this.topPanel.getBBox(),e=this.leftPanel.getBBox(),n=this.rightPanel.getBBox(),a=this.containerHeight-i.height;this.bottomPanel.move({y:a}),a=this.settings.paddingB+this.settings.scaleFontSize+5,i=this.bottomPanel.getBBox(),this.y0=i.y-a,this.yAxisLength=this.y0-(s.y+s.height+this.settings.paddingC),this.xAxisLength=n.x-this.settings.paddingC,this.x0=e.width+this.settings.paddingC,"undefined"!=typeof option?options.hasOwnProperty("vScale")&&"right"==options.vScale&&(this.xAxisLength-=this.settings.scaleArea+this.x0):(this.x0+=this.settings.scaleArea,this.xAxisLength-=this.x0);var o=this.objData.dataSet.length,h=this.objData.dataSet[0].data.length,l=this.xAxisLength/h,g=this.settings.groupColumnPadding+o*this.settings.maxColumnWidth+(o-1)*this.settings.columnPadding;if(g>l){var r=l/g;this.settings.maxColumnWidth=r*this.settings.maxColumnWidth,this.settings.columnPadding=r*this.settings.columnPadding,this.settings.groupColumnPadding=r*this.settings.groupColumnPadding}else g<l&&(this.settings.groupColumnPadding+=l-g);this.vScale={min:1e6,max:this.objData.dataSet[0].data[0],minEx:null,numIntervals:null,isLogarithmic:!1,axisLength:this.yAxisLength,minVisualValue:10,intervalLength:80,factor:1},this.setScale.call(this.vScale,this.objData.dataSet,function(t,i){var s,e,n,a;for(n=i.length,a=i[0].data.length,s=0;s<n;s++)for(e=0;e<a;e++)i[s].data[e]>0&&(t.min>i[s].data[e]&&(t.min=i[s].data[e]),t.max<i[s].data[e]&&(t.max=i[s].data[e]))}),this.vTransform=this.transForm.bind(this.vScale),this.vInvTransform=this.invTransForm.bind(this.vScale),this.mkVScale(this.x0),this.setCathegories(l),this.printSeries(h,o)}Columns.prototype=Object.create(Grid.prototype,{constructor:{configurable:!0,enumerable:!0,value:Columns,writable:!0}}),Columns.prototype.setCathegories=function(t){var i,s=this.objData.dataSet[0].data.length,e=this.x0;for(i=0;i<s+1;i++)new Line(this.paper,e,this.y0,e,this.y0+10,{stroke:this.settings.scaleColor}),i<s&&this.printcategory(this.objData.labels[i],e,this.y0+10,t,"after","center",this.popUp,this.containerID),e+=t},Columns.prototype.printSeries=function(t,i){var s,e;for(s=this.x0+this.settings.groupColumnPadding/2,e=0;e<t;e++)this.columnGroup(e,i,s),s+=this.settings.groupColumnPadding-this.settings.columnPadding,s+=i*(this.settings.columnPadding+this.settings.maxColumnWidth)},Columns.prototype.columnGroup=function(t,i,s){var e=this,n=(t=t,i=i,s=s,e.objData);setTimeout(function(){var a,o,h,l,g=e.popUp;o=s;var r=new Group("stocked",e.settings.popUpA.justifyContent);for(r.insert(new Text(e.paper,-500,e.y0,e.settings.popUpA.maxWidth,"after","left",n.labels[t],{fill:e.settings.popUpA.font.fill,"font-size":e.settings.popUpA.font["font-size"],"font-weight":"500","font-family":e.settings.popUpA.font["font-family"]})),r.insertSpace(5),a=0;a<i;a++)new AnimateVBar(e.paper,o,e.y0,e.settings.maxColumnWidth,e.vTransform(n.dataSet[a].data[t]),{fill:n.dataSet[a].color,"sfill-opacity":.8,"stroke-width":"0px"}),o+=e.settings.columnPadding+e.settings.maxColumnWidth,l=this.objData.dataSet[a].name+" "+formatNumber(this.objData.dataSet[a].data[t]),r.insert(new Text(e.paper,-500,0,e.settings.popUpA.maxWidth,"after","left",l,e.settings.popUpA.font));r.hide();var p=r.width,d=r.height;d+=2*e.settings.popUpA.paddingX,p+=2*e.settings.popUpA.paddingY;var m=new Rect(e.paper,s,0,o-s-e.settings.columnPadding,e.y0,{fill:"#ffffff","fill-opacity":0,"stroke-opacity":0});h=null,m.mouseover(function(t){null==h&&(h=1,e.moveLabel(t,p,d,r,function(t,i){}))}),m.mouseout(function(){r.hide(),g.hide(),h=null})},100)};
function Lines(t){Grid.call(this,t),this.containerHeight=this.containerWidth/1.618,this.canvas.style.height=this.containerHeight+"px",this.settings={minDataInterval:25,"line-width":2,elapsedTime:2e3},this.setDefaults(),this.setPaper(),this.paper.paper.setViewBox(0,0,this.containerWidth,this.containerHeight),this.setTitle(),this.setKeys(),this.setPanelsTB(),this.presetPanelsLRWH(),this.setPanelsLR();var i=this.bottomPanel.getBBox(),e=this.topPanel.getBBox(),s=this.leftPanel.getBBox(),a=this.rightPanel.getBBox(),n=this.containerHeight-i.height;this.bottomPanel.move({y:n}),n=this.settings.paddingB+this.settings.scaleFontSize+5,i=this.bottomPanel.getBBox(),this.y0=i.y-n,this.yAxisLength=this.y0-(e.y+e.height+this.settings.paddingC),this.xAxisLength=a.x-this.settings.paddingC,this.x0=s.width+this.settings.paddingC,"undefined"!=typeof option?options.hasOwnProperty("vScale")&&"right"==options.vScale&&(this.xAxisLength-=this.settings.scaleArea+this.x0):(this.x0+=this.settings.scaleArea,this.xAxisLength-=this.x0),this.vScale={min:1e6,max:this.objData.dataSet[0].data[0],minEx:null,numIntervals:null,isLogarithmic:!1,axisLength:this.yAxisLength,minVisualValue:10,intervalLength:80,factor:1},this.setScale.call(this.vScale,this.objData.dataSet,function(t,i){var e,s,a,n;for(a=i.length,n=i[0].data.length,e=0;e<a;e++)for(s=0;s<n;s++)i[e].data[s]>0&&(t.min>i[e].data[s]&&(t.min=i[e].data[s]),t.max<i[e].data[s]&&(t.max=i[e].data[s]))}),this.vTransform=this.transForm.bind(this.vScale),this.vInvTransform=this.invTransForm.bind(this.vScale),this.mkVScale(this.x0),this.hScale(),this.ms=Math.round(this.settings.ms/this.objData.dataSet[0].data.length),this.printSeries(0)}Lines.prototype=Object.create(Grid.prototype,{constructor:{configurable:!0,enumerable:!0,value:Lines,writable:!0}}),Lines.prototype.hScale=function(){for(var t=this.objData.serie.length,i=t,e=(this.xAxisLength-this.settings.paddingA)/(i-1),s=1;this.settings.minDataInterval>e;)s++,i=Math.floor(t/s),e=(this.xAxisLength-this.settings.paddingA)/i;this.settings.minDataInterval=(this.xAxisLength-this.settings.paddingA)/(t-1),this.firstPoint=this.x0+this.settings.paddingA/2;var a,n,o=0;for(a=this.firstPoint,n=this.objData.serie.length,o=0;o<n;o++)o%s!=0&&o!=n-1||(new Line(this.paper,a,this.y0+5,a,this.y0,{stroke:this.settings.scaleColor}),this.printcategory(this.objData.serie[o],a-this.settings.scaleArea/2,this.y0+2+this.settings.scaleFontSize,this.settings.scaleArea,"after","center",this.popUp,this.containerID)),a+=this.settings.minDataInterval},Lines.prototype.printSeries=function(t){var i,e,s,a,n,o,h=this;n=h.objData.serie.length,o=h.objData.dataSet.length;var r,p=t;for(r=0;r<o;r++)i=h.firstPoint+p*h.settings.minDataInterval,e=h.y0-this.vTransform(h.objData.dataSet[r].data[p]),h.recordPoint(p,r,i,e),p<n-1&&(s=i+h.settings.minDataInterval,a=h.y0-this.vTransform(h.objData.dataSet[r].data[p+1]),new AnimateLine(h.paper,i,e,s,a,h.ms,{stroke:h.objData.dataSet[r].color,"stroke-width":h.settings["line-width"]+"px"}));p<n-1&&setTimeout(function(){p++,h.printSeries(p)},h.ms)},Lines.prototype.recordPoint=function(t,i,e,s){var a=this;t=t,i=i,e=e,s=s,a.objData;setTimeout(function(){var n,o,h=a.popUp,r=new Group("stocked",a.settings.popUpA.justifyContent);r.insert(new Text(a.paper,-500,a.y0,a.settings.popUpA.maxWidth,"after","left",a.objData.serie[t],{fill:a.settings.popUpA.font.fill,"font-size":a.settings.popUpA.font["font-size"],"font-style":a.settings.popUpA.font["font-style"],"font-weight":"bold","font-family":a.settings.popUpA["font-family"]})),r.insertSpace(5),o=this.objData.dataSet[i].name+" "+formatNumber(this.objData.dataSet[i].data[t]),r.insert(new Text(a.paper,-500,0,a.settings.popUpA.maxWidth,"after","left",o,a.settings.popUpA.font)),r.hide();var p=r.getBBox(),l=p.width,g=p.height;g+=2*a.settings.popUpA.paddingX,l+=2*a.settings.popUpA.paddingY;var d=new Circle(a.paper,e,s,1.75*a.settings["line-width"],{fill:a.objData.dataSet[i].color,"stroke-width":8,stroke:a.objData.dataSet[i].color,"stroke-opacity":0});n=null,d.mouseover(function(t){null==n&&(d.attr({"stroke-opacity":.5}),n=1,a.moveLabel(t,l,g,r,function(t,i){}))}),d.mouseout(function(){d.attr({"stroke-opacity":0}),r.hide(),h.hide(),n=null})},100)};
function BubbleChart(t){Grid.call(this,t),this.containerHeight=this.containerWidth/1.618,this.canvas.style.height=this.containerHeight+"px",this.settings={bubbleStyle:{fill:"#bddaf5",stroke:"#7aaadc"}},this.setDefaults(),this.setPaper(),this.paper.paper.setViewBox(0,0,this.containerWidth,this.containerHeight),this.setTitle(),this.setKeys(),this.setPanelsTB(),this.presetPanelsLRWH(),this.setPanelsLR();var a=this.bottomPanel.getBBox(),e=this.topPanel.getBBox(),s=this.leftPanel.getBBox(),n=this.rightPanel.getBBox(),h=this.containerHeight-a.height;this.bottomPanel.move({y:h}),this.y0=h-(this.settings.paddingB+.6*this.settings.paddingA),this.yAxisLength=this.y0-(e.y+e.height+this.settings.paddingC),h=1.5*this.settings.paddingA,this.x0=s.width+this.settings.paddingC,"undefined"!=typeof option?options.hasOwnProperty("vScale")&&("left"==options.vScale?(this.x0+=h,h=0):"dual"==options.vScale&&(this.x0+=h)):(this.x0+=h,h=0),n=this.rightPanel.getBBox(),this.xAxisLength=n.x-(this.settings.paddingC+this.x0+h),this.vScale={min:1e6,max:this.objData.dataSet[0].data[1],minEx:null,numIntervals:null,isLogarithmic:!1,axisLength:this.yAxisLength,minVisualValue:10,intervalLength:80,factor:1},this.setScale.call(this.vScale,this.objData.dataSet,function(t,a){var i,e;for(e=a.length,i=0;i<e;i++)a[i].data[1]>0&&(t.min>a[i].data[1]?t.min=a[i].data[1]:t.max<a[i].data[1]&&(t.max=a[i].data[1]))}),this.vTransform=this.transForm.bind(this.vScale),this.vInvTransform=this.invTransForm.bind(this.vScale),this.hScale={min:1e6,max:this.objData.dataSet[0].data[0],minEx:null,numIntervals:null,isLogarithmic:!1,axisLength:this.xAxisLength,minVisualValue:10,intervalLength:80,factor:1},this.setScale.call(this.hScale,this.objData.dataSet,function(t,a){var i,e;for(e=a.length,i=0;i<e;i++)a[i].data[0]>0&&(t.min>a[i].data[0]?t.min=a[i].data[0]:t.max<a[i].data[0]&&(t.max=a[i].data[0]))}),this.hTransform=this.transForm.bind(this.hScale),this.hInvTransform=this.invTransForm.bind(this.hScale),this.mkVScale(this.x0),this.mkHScale(this.y0);var o=t.dataSet.length,r=[];for(i=0;i<o;i++)r[i]=i;for(r.sort(function(a,i){return t.dataSet[i].data[2]-t.dataSet[a].data[2]}),i=0;i<o;i++){this.printBubble(r[i],t);r[i]}}BubbleChart.prototype=Object.create(Grid.prototype,{constructor:{configurable:!0,enumerable:!0,value:BubbleChart,writable:!0}}),BubbleChart.prototype.printBubble=function(t,a){var i=this;t=t,a=i.objData;setTimeout(function(){var e,s=i.popUp,n=i.settings.popUpA.maxWidth,h=new Group("stocked",i.settings.popUpA.justifyContent);h.insert(new Text(i.paper,-500,0,n,"after","left",a.dataSet[t].name,{fill:i.settings.popUpA.font.fill,"font-size":i.settings.popUpA.font["font-size"],"font-weight":"bold","font-family":i.settings.popUpA.font["font-family"]})),h.insertSpace(5);var o=[a.dataNames[0]+formatNumber(a.dataSet[t].data[0]),a.dataNames[1]+formatNumber(a.dataSet[t].data[1]),a.dataNames[2]+a.dataSet[t].data[2]];for(e=0;e<3;e++)h.insert(new Text(i.paper,-500,0,n,"after","left",o[e],i.settings.popUpA.font));h.hide();var l=h.width,d=h.height;d+=2*i.settings.popUpA.paddingX,l+=2*i.settings.popUpA.paddingY;var p=new AnimateCircle(i.paper,i.x0+i.hTransform(a.dataSet[t].data[0]),i.y0-i.vTransform(a.dataSet[t].data[1]),7+10*Math.log10(a.dataSet[t].data[2]),{fill:i.settings.bubbleStyle.fill,"fill-opacity":.8,stroke:i.settings.bubbleStyle.stroke,"stroke-opacity":.8});r=null,p.mouseover(function(t){null==r&&(r=!0,p.attr({"stroke-width":"2px"}),i.moveLabel(t,l,d,h))}),p.mouseout(function(){p.attr({"stroke-width":"1px"}),h.hide(),s.hide(),r=null})},10)};
function DonutChart(t){Grid.call(this,t),this.settings={donutWidth:30,maxDonutFont:50,orderData:!0},this.setDefaults(),this.setPaper(),this.setTitle(),this.setKeys(),this.setPanelsTB();var i=this.bottomPanel.getBBox(),a=this.topPanel.getBBox(),s=this.presetPanelsLRWH(),e=this.containerWidth-(s.lw+s.rw+3*this.settings.paddingB);this.x0=s.lw+this.settings.paddingB+e/2,this.radious=e/2-this.settings.donutWidth;var h=a.height+i.height+Math.max(s.lh,s.rh,e);this.containerHeight=h,this.canvas.style.height=h+"px",this.paper.paper.setViewBox(0,0,this.containerWidth,this.containerHeight);h=this.containerHeight-i.height;this.bottomPanel.move({y:h}),this.y0=h-this.settings.paddingB-e/2,this.setPanelsLR(),this.cAngle=-3*Math.PI/2,this.mkLabels();var o,n=[],r=this.objData.dataSet.length;for(o=0;o<r;o++)n[o]=o;this.settings.orderData&&n.sort(function(t,i){return this.objData.dataSet[t].data-this.objData.dataSet[i].data}),this.labels[n[r-1]].show(),this.dataTest={a:n[r-1]},this.printArch(n,0)}DonutChart.prototype=Object.create(Grid.prototype,{constructor:{configurable:!0,enumerable:!0,value:DonutChart,writable:!0}}),DonutChart.prototype.printArch=function(t,i){if(i<this.objData.dataSet.length){var a=t[i],s=this.objData.dataSet[a].data,e=new AnimatedArch(this.paper,this.cAngle,s,this.x0,this.y0,this.radious,this.settings.donutWidth,700,{fill:this.objData.dataSet[a].color,stroke:this.objData.dataSet[a].color,"stroke-width":"0px"}),h=this.labels,o=this.dataTest,n=a;n!=o.a&&(h[o.a].hide(),o.a=n,h[n].show());var r=this,l=null;e.mouseover(function(t){null==l&&(n!=o.a&&(h[o.a].hide(),o.a=n,h[n].show()),e.attr({fill:changeColor(r.objData.dataSet[a].color,.2)}),l=1)}),e.mouseout(function(){e.attr({fill:r.objData.dataSet[a].color}),l=null}),this.cAngle+=2*Math.PI*s/100,i++,setTimeout(function(){r.printArch(t,i)},700)}},DonutChart.prototype.mkLabels=function(){this.labels=[];var t,i,a,s,e,h,o,n;for(i=this.objData.dataSet.length,t=0;t<i;t++)this.labels[t]=new Group("stocked","center"),a=s=0,this.labels[t].insert(new Text(this.paper,0,0,2*(this.radious+this.settings.donutWidth),"after","center",this.objData.dataSet[t].name,{fill:this.objData.dataSet[t].color,"font-size":this.settings.maxDonutFont,"font-family":this.settings["font-family"]})),this.labels[t].insert(new Text(this.paper,0,0,2*(this.radious+this.settings.donutWidth),"after","center",this.objData.dataSet[t].data[0]+"%",{fill:this.objData.dataSet[t].color,"font-size":Math.floor(.8*this.settings.maxDonutFont),"font-family":this.settings["font-family"]})),e=this.labels[t].getBBox(),a=this.x0-e.width/2-5,s=this.y0-e.height/2,h=Math.sqrt((e.width+10)*(e.width+10)+e.height*e.height),n="s"+(o=Math.min(1,2*this.radious/h))+","+o+","+this.x0+","+this.y0,this.labels[t].move({x:a,y:s}),this.labels[t].Scale(n),this.labels[t].hide()};
function SunburstChart(t){Grid.call(this,t),this.settings={donutWidth:60,maxDonutFont:50,orderData:!0},this.setDefaults(),this.setPaper(),this.setTitle(),this.setKeys(),this.setPanelsTB();var i=this.bottomPanel.getBBox(),s=this.topPanel.getBBox(),a=this.presetPanelsLRWH(),e=this.containerWidth-(a.lw+a.rw+3*this.settings.paddingB);this.x0=a.lw+this.settings.paddingB+e/2,this.radious=e/2-this.objData.dataSet[0].data.length*this.settings.donutWidth;var h=s.height+i.height+Math.max(a.lh,a.rh,e);this.containerHeight=h,this.canvas.style.height=h+"px",this.paper.paper.setViewBox(0,0,this.containerWidth,this.containerHeight);h=this.containerHeight-i.height;this.bottomPanel.move({y:h}),this.y0=h-this.settings.paddingB-e/2,this.setPanelsLR(),this.cAngle=-3*Math.PI/2,this.mkLabels();var n,o=[],r=this.objData.dataSet.length;for(n=0;n<r;n++)o[n]=n;this.settings.orderData&&o.sort(function(t,i){return this.objData.dataSet[t].data-this.objData.dataSet[i].data}),this.labels[o[r-1]].show(),this.dataTest={a:o[r-1]};var l=[];for(n=0;n<r;n++)l[n]=this.objData.dataSet[o[n]].data[0];this.printArch(this.cAngle,l,o,0,0,700,0)}SunburstChart.prototype=Object.create(Grid.prototype,{constructor:{configurable:!0,enumerable:!0,value:SunburstChart,writable:!0}}),SunburstChart.prototype.printArch=function(t,i,s,a,e,h,n){if(a<i.length){var o=i[a],r=changeColor(this.objData.dataSet[s[e]].color,a*n*.2);if(n<1){var l=[];for(k=0;k<this.objData.dataSet[s[a]].data[1].length;k++)l[k]=this.objData.dataSet[s[a]].data[1][k];this.printArch(t,l,s,0,e,Math.floor(h/this.objData.dataSet[s[a]].data[1].length),n+1)}var d=new AnimatedArch(this.paper,t,o,this.x0,this.y0,this.radious+n*this.settings.donutWidth,this.settings.donutWidth,h,{fill:r,stroke:r,"stroke-width":"0px"});d.attr({"stroke-width":"1px",stroke:"#ffffff"});var p=this;if(0==n){var f=this.labels,u=this.dataTest,g=a;g!=u.a&&(f[u.a].hide(),u.a=g,f[g].show());var c=null;d.mouseover(function(t){null==c&&(g!=u.a&&(f[u.a].hide(),u.a=g,f[g].show()),d.attr({fill:changeColor(r,.5)}),c=1)}),d.mouseout(function(){d.attr({fill:r}),c=null});e=e+1}else{var b=new Group("stocked",this.settings.popUpA.justifyContent);b.insert(new Text(this.paper,0,0,this.settings.popUpA.maxWidth,"after","left",this.objData.dataSet[a].name[0],{fill:this.settings.popUpA.font.fill,"font-size":this.settings.popUpA.font["font-size"],"font-weight":"500","font-family":this.settings.popUpA.font["font-family"]})),b.insertSpace(5);var m=new Row;m.insert(new Text(this.paper,0,0,this.settings.popUpA.maxWidth,"after","left",this.objData.dataSet[a].name[n][a]+" "+formatNumber(i[a],4),this.settings.popUpA.font)),b.insert(m),b.hide();var w=(c=b.getBBox()).width+2*this.settings.popUpA.paddingX,x=c.height+2*this.settings.popUpA.paddingY,S=this.popUp;c=null,d.mouseover(function(t){null==c&&(c=1,p.moveLabel(t,w,x,b,function(t,i){}),d.attr({fill:changeColor(r,.5)}))}),d.mouseout(function(){d.attr({fill:r}),b.hide(),S.hide(),c=null})}a++,setTimeout(function(){p.printArch(t+2*Math.PI*o/100,i,s,a,e,h,n)},h)}},SunburstChart.prototype.mkLabels=function(){this.labels=[];var t,i,s,a,e,h,n,o;for(i=this.objData.dataSet.length,t=0;t<i;t++)this.labels[t]=new Group("stocked","center"),s=a=0,this.labels[t].insert(new Text(this.paper,0,0,2*(this.radious+this.settings.donutWidth),"after","center",this.objData.dataSet[t].name[0],{fill:this.objData.dataSet[t].color,"font-size":this.settings.maxDonutFont,"font-family":this.settings["font-family"]})),this.labels[t].insert(new Text(this.paper,0,0,2*(this.radious+this.settings.donutWidth),"after","center",this.objData.dataSet[t].data[0]+"%",{fill:this.objData.dataSet[t].color,"font-size":Math.floor(.8*this.settings.maxDonutFont),"font-family":this.settings["font-family"]})),e=this.labels[t].getBBox(),s=this.x0-e.width/2-5,a=this.y0-e.height/2,h=Math.sqrt((e.width+10)*(e.width+10)+e.height*e.height),o="s"+(n=Math.min(1,2*this.radious/h))+","+n+","+this.x0+","+this.y0,this.labels[t].move({x:s,y:a}),this.labels[t].Scale(o),this.labels[t].hide()};
